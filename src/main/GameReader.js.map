{"version":3,"file":"GameReader.js","sourceRoot":"","sources":["GameReader.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n\tDataType,\r\n\tfindModule,\r\n\tgetProcesses,\r\n\tModuleObject,\r\n\topenProcess,\r\n\tProcessObject,\r\n\treadBuffer,\r\n\treadMemory as readMemoryRaw,\r\n\tfindPattern as findPatternRaw,\r\n\tvirtualAllocEx,\r\n\twriteBuffer,\r\n\twriteMemory,\r\n\tgetProcessPath,\r\n} from 'memoryjs';\r\nimport Struct from 'structron';\r\nimport { IpcOverlayMessages, IpcRendererMessages } from '../common/ipc-messages';\r\nimport { GameState, AmongUsState, Player } from '../common/AmongUsState';\r\nimport { fetchOffsetLookup, fetchOffsetsJson, IOffsets, IOffsetsLookup } from './offsetStore';\r\nimport Errors from '../common/Errors';\r\nimport { CameraLocation, MapType } from '../common/AmongusMap';\r\nimport { GenerateAvatars, numberToColorHex } from './avatarGenerator';\r\nimport { RainbowColorId } from '../renderer/cosmetics';\r\nimport { platform } from 'os';\r\nimport fs from 'fs';\r\nimport path from 'path';\r\nimport { AmongusMod, modList } from '../common/Mods';\r\n\r\n// begin: rhs version\r\nimport { ISettings } from '../common/ISettings';\r\nimport Store from 'electron-store';\r\n\r\nconst store = new Store<ISettings>();\r\n// end: rhs version\r\n\r\n/* this is only used for the annoying watermark\r\n\tso removing it but leaving the code here\r\n\tfor future reference\r\n\r\n\timport { app } from 'electron';\r\n\r\n\tlet appVersion = '';\r\n\tif (process.env.NODE_ENV !== 'production') {\r\n\t\tappVersion = 'DEV';\r\n\t} else {\r\n\t\tappVersion = app.getVersion();\r\n\t}\r\n\r\n */\r\ninterface ValueType<T> {\r\n\tread(buffer: BufferSource, offset: number): T;\r\n\tSIZE: number;\r\n}\r\n\r\ninterface PlayerReport {\r\n\tobjectPtr: number;\r\n\toutfitsPtr: number;\r\n\tid: number;\r\n\tname: number;\r\n\tcolor: number;\r\n\that: string;\r\n\tskin: string;\r\n\tvisor: string;\r\n\tpet: number;\r\n\trolePtr: number;\r\n\tdisconnected: number;\r\n\timpostor: number;\r\n\tdead: number;\r\n\ttaskPtr: number;\r\n}\r\n\r\nexport default class GameReader {\r\n\tsendIPC: Electron.WebContents['send'];\r\n\toffsets: IOffsets | undefined;\r\n\tPlayerStruct: Struct | undefined;\r\n\tinitializedWrite = false;\r\n\twrittenPingMessage = true;\r\n\tmenuUpdateTimer = 20;\r\n\tlastPlayerPtr = 0;\r\n\tshouldReadLobby = false;\r\n\tis_64bit = false;\r\n\tis_linux = false;\r\n\toldGameState = GameState.UNKNOWN;\r\n\tlastState: AmongUsState = {} as AmongUsState;\r\n\tamongUs: ProcessObject | null = null;\r\n\tgameAssembly: ModuleObject | null = null;\r\n\tlocalPlayerName = '';\r\n\tcolorsInitialized = false;\r\n\trainbowColor = -9999;\r\n\tgameCode = 'MENU';\r\n\tshellcodeAddr = -1;\r\n\tcurrentServer = '';\r\n\tdisableWriting = false;\r\n\tpid = -1;\r\n\tloadedMod = modList[0];\r\n\tgamePath = '';\r\n\toldMeetingHud = false;\r\n\tplayercolors: string[][] = [];\r\n\r\n\tconstructor(sendIPC: Electron.WebContents['send']) {\r\n\t\tthis.is_linux = platform() === 'linux';\r\n\t\tthis.sendIPC = sendIPC;\r\n\t}\r\n\r\n\tasync checkProcessOpen(): Promise<void> {\r\n\t\tconst processesOpen = getProcesses().filter((p) => p.szExeFile === 'Among Us.exe');\r\n\t\tlet error = '';\r\n\t\tconst reset = this.amongUs && processesOpen.filter((o) => o.th32ProcessID === this.pid).length === 0;\r\n\t\tif ((!this.amongUs || reset) && processesOpen.length > 0) {\r\n\t\t\tfor (const processOpen of processesOpen) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.pid = processOpen.th32ProcessID;\r\n\t\t\t\t\tthis.amongUs = openProcess(processOpen.th32ProcessID);\r\n\t\t\t\t\tthis.gameAssembly = findModule('GameAssembly.dll', this.amongUs.th32ProcessID);\r\n\t\t\t\t\tthis.gamePath = getProcessPath(this.amongUs.handle);\r\n\t\t\t\t\tthis.loadedMod = this.getInstalledMods(this.gamePath);\r\n\t\t\t\t\tawait this.initializeoffsets();\r\n\t\t\t\t\tthis.sendIPC(IpcRendererMessages.NOTIFY_GAME_OPENED, true);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log('ERROR:', e);\r\n\t\t\t\t\tif (processOpen && e.toString() === 'Error: unable to find process') {\r\n\t\t\t\t\t\terror = Errors.OPEN_AS_ADMINISTRATOR;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\terror = e.toString();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.amongUs = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!this.amongUs && error) {\r\n\t\t\t\tthrow error;\r\n\t\t\t}\r\n\t\t} else if (this.amongUs && (processesOpen.length === 0 || reset)) {\r\n\t\t\tthis.amongUs = null;\r\n\t\t\ttry {\r\n\t\t\t\tthis.sendIPC(IpcRendererMessages.NOTIFY_GAME_OPENED, false);\r\n\t\t\t} catch (e) {\r\n\t\t\t\t/*empty*/\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn;\r\n\t}\r\n\r\n\tgetInstalledMods(filePath: string): AmongusMod {\r\n\t\tconst pathLower = filePath.toLowerCase();\r\n\t\tif (pathLower.includes('?\\\\volume') || this.is_linux) {\r\n\t\t\treturn modList[0];\r\n\t\t} else {\r\n\t\t\tconst dir = path.dirname(filePath);\r\n\t\t\tif (!fs.existsSync(path.join(dir, 'winhttp.dll')) || !fs.existsSync(path.join(dir, 'BepInEx\\\\plugins'))) {\r\n\t\t\t\treturn modList[0];\r\n\t\t\t}\r\n\t\t\tfor (const file of fs.readdirSync(path.join(dir, 'BepInEx\\\\plugins'))) {\r\n\t\t\t\tconsole.log(`MOD! ${file}`);\r\n\t\t\t\tconst mod = modList.find((o) => o.dllStartsWith && file.includes(o.dllStartsWith));\r\n\t\t\t\tif (mod) return mod;\r\n\t\t\t}\r\n\t\t\treturn modList[0];\r\n\t\t}\r\n\t}\r\n\r\n\tcheckProcessDelay = 0;\r\n\tisLocalGame = false;\r\n\tasync loop(): Promise<string | null> {\r\n\t\tif (this.checkProcessDelay-- <= 0) {\r\n\t\t\tthis.checkProcessDelay = 30;\r\n\t\t\ttry {\r\n\t\t\t\tawait this.checkProcessOpen();\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.checkProcessDelay = 0\r\n\t\t\t\treturn e.toString();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (\r\n\t\t\tthis.PlayerStruct &&\r\n\t\t\tthis.offsets &&\r\n\t\t\tthis.amongUs !== null &&\r\n\t\t\tthis.gameAssembly !== null &&\r\n\t\t\tthis.offsets !== undefined\r\n\t\t) {\r\n\t\t\tthis.loadColors();\r\n\r\n\t\t\tlet state = GameState.UNKNOWN;\r\n\t\t\tconst meetingHud = this.readMemory<number>('pointer', this.gameAssembly.modBaseAddr, this.offsets.meetingHud);\r\n\t\t\tconst meetingHud_cachePtr =\r\n\t\t\t\tmeetingHud === 0 ? 0 : this.readMemory<number>('pointer', meetingHud, this.offsets.objectCachePtr);\r\n\t\t\tconst meetingHudState =\r\n\t\t\t\tmeetingHud_cachePtr === 0 ? 4 : this.readMemory('int', meetingHud, this.offsets.meetingHudState, 4);\r\n\r\n\t\t\tconst innerNetClient = this.readMemory<number>(\r\n\t\t\t\t'ptr',\r\n\t\t\t\tthis.gameAssembly.modBaseAddr,\r\n\t\t\t\tthis.offsets.innerNetClient.base\r\n\t\t\t);\r\n\r\n\t\t\tconst gameState = this.readMemory<number>('int', innerNetClient, this.offsets.innerNetClient.gameState);\r\n\r\n\t\t\tswitch (gameState) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tstate = GameState.MENU;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tstate = GameState.LOBBY;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tif (meetingHudState < 4) state = GameState.DISCUSSION;\r\n\t\t\t\t\telse state = GameState.TASKS;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t// const DEBUG = true;\r\n\t\t\tconst lobbyCodeInt =\r\n\t\t\t\tstate === GameState.MENU\r\n\t\t\t\t\t? -1\r\n\t\t\t\t\t: this.readMemory<number>('int32', innerNetClient, this.offsets.innerNetClient.gameId);\r\n\r\n\r\n\t\t\tthis.gameCode =\r\n\t\t\t\tstate === GameState.MENU\r\n\t\t\t\t\t? ''\r\n\t\t\t\t\t: lobbyCodeInt === this.lastState.lobbyCodeInt\r\n\t\t\t\t\t\t? this.gameCode\r\n\t\t\t\t\t\t: this.IntToGameCode(lobbyCodeInt);\r\n\r\n\t\t\t// if (DEBUG) {\r\n\t\t\t// \tthis.gameCode = 'oof';\r\n\t\t\t// }\r\n\r\n\t\t\tconst allPlayersPtr = this.readMemory<number>('ptr', this.gameAssembly.modBaseAddr, this.offsets.allPlayersPtr);\r\n\t\t\tconst allPlayers = this.readMemory<number>('ptr', allPlayersPtr, this.offsets.allPlayers);\r\n\r\n\t\t\tconst playerCount = this.readMemory<number>('int' as const, allPlayersPtr, this.offsets.playerCount);\r\n\t\t\tlet playerAddrPtr = allPlayers + this.offsets.playerAddrPtr;\r\n\t\t\tconst players = [];\r\n\r\n\t\t\tconst hostId = this.readMemory<number>('uint32', innerNetClient, this.offsets.innerNetClient.hostId);\r\n\t\t\tconst clientId = this.readMemory<number>('uint32', innerNetClient, this.offsets.innerNetClient.clientId);\r\n\t\t\tthis.isLocalGame = lobbyCodeInt === 32; // is local game\r\n\t\t\tlet lightRadius = 1;\r\n\t\t\tlet comsSabotaged = false;\r\n\t\t\tlet currentCamera = CameraLocation.NONE;\r\n\t\t\tlet map = MapType.UNKNOWN;\r\n\t\t\tlet maxPlayers = 10;\r\n\t\t\tconst closedDoors: number[] = [];\r\n\t\t\tlet localPlayer = undefined;\r\n\t\t\tif (\r\n\t\t\t\tthis.currentServer === '' ||\r\n\t\t\t\t(this.oldGameState != state &&\r\n\t\t\t\t\t(this.oldGameState === GameState.MENU || this.oldGameState === GameState.UNKNOWN))\r\n\t\t\t) {\r\n\t\t\t\tthis.readCurrentServer();\r\n\t\t\t}\r\n\t\t\tif ((this.gameCode || this.isLocalGame) && playerCount) {\r\n\t\t\t\tfor (let i = 0; i < Math.min(playerCount, 40); i++) {\r\n\t\t\t\t\tconst { address, last } = this.offsetAddress(playerAddrPtr, this.offsets.player.offsets);\r\n\t\t\t\t\tif (address === 0) continue;\r\n\t\t\t\t\tconst playerData = readBuffer(this.amongUs.handle, address + last, this.offsets.player.bufferLength);\r\n\t\t\t\t\tconst player = this.parsePlayer(address + last, playerData, clientId);\r\n\t\t\t\t\tplayerAddrPtr += this.is_64bit ? 8 : 4;\r\n\t\t\t\t\tif (!player || state === GameState.MENU) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.isLocalGame && player.clientId == hostId) {\r\n\t\t\t\t\t\tthis.gameCode = ((player.nameHash % 99999)).toString();\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (player.isLocal) {\r\n\t\t\t\t\t\tlocalPlayer = player;\r\n\t\t\t\t\t\tthis.localPlayerName = player.name;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tplayers.push(player);\r\n\t\t\t\t}\r\n\t\t\t\tif (localPlayer) {\r\n\t\t\t\t\tthis.fixPingMessage();\r\n\t\t\t\t\tlightRadius = this.readMemory<number>('float', localPlayer.objectPtr, this.offsets.lightRadius, -1);\r\n\t\t\t\t}\r\n\t\t\t\tconst gameOptionsPtr = this.readMemory<number>(\r\n\t\t\t\t\t'ptr',\r\n\t\t\t\t\tthis.gameAssembly.modBaseAddr,\r\n\t\t\t\t\tthis.offsets.playerControl_GameOptions\r\n\t\t\t\t);\r\n\t\t\t\tmaxPlayers = this.readMemory<number>('byte', gameOptionsPtr, this.offsets.gameOptions_MaxPLayers);\r\n\t\t\t\tmap = this.readMemory<number>('byte', gameOptionsPtr, this.offsets.gameOptions_MapId);\r\n\r\n\t\t\t\tif (state === GameState.TASKS) {\r\n\t\t\t\t\tconst shipPtr = this.readMemory<number>('ptr', this.gameAssembly.modBaseAddr, this.offsets.shipStatus);\r\n\r\n\t\t\t\t\tconst systemsPtr = this.readMemory<number>('ptr', shipPtr, this.offsets.shipStatus_systems);\r\n\r\n\t\t\t\t\tif (systemsPtr !== 0 && state === GameState.TASKS) {\r\n\t\t\t\t\t\tthis.readDictionary(systemsPtr, 47, (k, v) => {\r\n\t\t\t\t\t\t\tconst key = this.readMemory<number>('int32', k);\r\n\t\t\t\t\t\t\tif (key === 14) {\r\n\t\t\t\t\t\t\t\tconst value = this.readMemory<number>('ptr', v);\r\n\t\t\t\t\t\t\t\tswitch (map) {\r\n\t\t\t\t\t\t\t\t\tcase MapType.AIRSHIP:\r\n\t\t\t\t\t\t\t\t\tcase MapType.POLUS:\r\n\t\t\t\t\t\t\t\t\tcase MapType.THE_SKELD:\r\n\t\t\t\t\t\t\t\t\tcase MapType.SUBMERGED: {\r\n\t\t\t\t\t\t\t\t\t\tcomsSabotaged =\r\n\t\t\t\t\t\t\t\t\t\t\tthis.readMemory<number>('uint32', value, this.offsets!.HudOverrideSystemType_isActive) === 1;\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcase MapType.MIRA_HQ: {\r\n\t\t\t\t\t\t\t\t\t\tcomsSabotaged =\r\n\t\t\t\t\t\t\t\t\t\t\tthis.readMemory<number>('uint32', value, this.offsets!.hqHudSystemType_CompletedConsoles) < 2;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (key === 18 && map === MapType.MIRA_HQ) {\r\n\t\t\t\t\t\t\t\t//SystemTypes Decontamination\r\n\t\t\t\t\t\t\t\tconst value = this.readMemory<number>('ptr', v);\r\n\t\t\t\t\t\t\t\tconst lowerDoorOpen = this.readMemory<number>('int', value, this.offsets!.deconDoorLowerOpen);\r\n\t\t\t\t\t\t\t\tconst upperDoorOpen = this.readMemory<number>('int', value, this.offsets!.deconDoorUpperOpen);\r\n\t\t\t\t\t\t\t\tif (!lowerDoorOpen) {\r\n\t\t\t\t\t\t\t\t\tclosedDoors.push(0);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!upperDoorOpen) {\r\n\t\t\t\t\t\t\t\t\tclosedDoors.push(1);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst minigamePtr = this.readMemory<number>('ptr', this.gameAssembly.modBaseAddr, this.offsets!.miniGame);\r\n\t\t\t\t\tconst minigameCachePtr = this.readMemory<number>('ptr', minigamePtr, this.offsets!.objectCachePtr);\r\n\t\t\t\t\tif (minigameCachePtr && minigameCachePtr !== 0 && localPlayer) {\r\n\t\t\t\t\t\tif (map === MapType.POLUS || map === MapType.AIRSHIP) {\r\n\t\t\t\t\t\t\tconst currentCameraId = this.readMemory<number>(\r\n\t\t\t\t\t\t\t\t'uint32',\r\n\t\t\t\t\t\t\t\tminigamePtr,\r\n\t\t\t\t\t\t\t\tthis.offsets!.planetSurveillanceMinigame_currentCamera\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconst camarasCount = this.readMemory<number>(\r\n\t\t\t\t\t\t\t\t'uint32',\r\n\t\t\t\t\t\t\t\tminigamePtr,\r\n\t\t\t\t\t\t\t\tthis.offsets!.planetSurveillanceMinigame_camarasCount\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tif (currentCameraId >= 0 && currentCameraId <= 5 && camarasCount === 6) {\r\n\t\t\t\t\t\t\t\tcurrentCamera = currentCameraId as CameraLocation;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (map === MapType.THE_SKELD) {\r\n\t\t\t\t\t\t\tconst roomCount = this.readMemory<number>(\r\n\t\t\t\t\t\t\t\t'uint32',\r\n\t\t\t\t\t\t\t\tminigamePtr,\r\n\t\t\t\t\t\t\t\tthis.offsets!.surveillanceMinigame_FilteredRoomsCount\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tif (roomCount === 4) {\r\n\t\t\t\t\t\t\t\tconst dist = Math.sqrt(Math.pow(localPlayer.x - -12.9364, 2) + Math.pow(localPlayer.y - -2.7928, 2));\r\n\t\t\t\t\t\t\t\tif (dist < 0.6) {\r\n\t\t\t\t\t\t\t\t\tcurrentCamera = CameraLocation.Skeld;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (map !== MapType.MIRA_HQ) {\r\n\t\t\t\t\t\tconst allDoors = this.readMemory<number>('ptr', shipPtr, this.offsets.shipstatus_allDoors);\r\n\t\t\t\t\t\tconst doorCount = Math.min(this.readMemory<number>('int', allDoors, this.offsets.playerCount), 16);\r\n\t\t\t\t\t\tfor (let doorNr = 0; doorNr < doorCount; doorNr++) {\r\n\t\t\t\t\t\t\tconst door = this.readMemory<number>(\r\n\t\t\t\t\t\t\t\t'ptr',\r\n\t\t\t\t\t\t\t\tallDoors + this.offsets.playerAddrPtr + doorNr * (this.is_64bit ? 0x8 : 0x4)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tconst doorOpen = this.readMemory<number>('int', door + this.offsets.door_isOpen) === 1;\r\n\t\t\t\t\t\t\t//\tconst doorId = this.readMemory<number>('int', door + this.offsets.door_doorId);\r\n\t\t\t\t\t\t\t//console.log(doorId);\r\n\t\t\t\t\t\t\tif (!doorOpen) {\r\n\t\t\t\t\t\t\t\tclosedDoors.push(doorNr);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//\tconsole.log('doorcount: ', doorCount, doorsOpen);\r\n\t\t\t}\r\n\r\n\t\t\t// if (this.oldGameState === GameState.DISCUSSION && state === GameState.TASKS) {\r\n\t\t\t// \tif (impostors === 0 || impostors >= crewmates) {\r\n\t\t\t// \t\tthis.exileCausesEnd = true;\r\n\t\t\t// \t\tstate = GameState.LOBBY;\r\n\t\t\t// \t}\r\n\t\t\t// }\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.oldGameState === GameState.MENU &&\r\n\t\t\t\tstate === GameState.LOBBY &&\r\n\t\t\t\tthis.menuUpdateTimer > 0 &&\r\n\t\t\t\t(this.lastPlayerPtr === allPlayers || !players.find((p) => p.isLocal))\r\n\t\t\t) {\r\n\t\t\t\tstate = GameState.MENU;\r\n\t\t\t\tthis.menuUpdateTimer--;\r\n\t\t\t} else {\r\n\t\t\t\tthis.menuUpdateTimer = 20;\r\n\t\t\t\tthis.lastPlayerPtr = allPlayers;\r\n\t\t\t}\r\n\t\t\tconst lobbyCode = state !== GameState.MENU ? this.gameCode || 'MENU' : 'MENU';\r\n\t\t\tconst newState: AmongUsState = {\r\n\t\t\t\tlobbyCode: lobbyCode,\r\n\t\t\t\tlobbyCodeInt,\r\n\t\t\t\tplayers,\r\n\t\t\t\tgameState: lobbyCode === 'MENU' ? GameState.MENU : state,\r\n\t\t\t\toldGameState: this.oldGameState,\r\n\t\t\t\tisHost: (hostId && clientId && hostId === clientId) as boolean,\r\n\t\t\t\thostId: hostId,\r\n\t\t\t\tclientId: clientId,\r\n\t\t\t\tcomsSabotaged,\r\n\t\t\t\tcurrentCamera,\r\n\t\t\t\tlightRadius,\r\n\t\t\t\tlightRadiusChanged: lightRadius != this.lastState?.lightRadius,\r\n\t\t\t\tmap,\r\n\t\t\t\tmod: this.loadedMod.id,\r\n\t\t\t\tclosedDoors,\r\n\t\t\t\tcurrentServer: this.currentServer,\r\n\t\t\t\tmaxPlayers,\r\n\t\t\t\toldMeetingHud: this.oldMeetingHud,\r\n\t\t\t};\r\n\t\t\t//\tconst stateHasChanged = !equal(this.lastState, newState);\r\n\t\t\tif (state !== GameState.MENU || this.oldGameState !== GameState.MENU) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.sendIPC(IpcRendererMessages.NOTIFY_GAME_STATE_CHANGED, newState);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tprocess.exit(0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//\t}\r\n\t\t\tthis.lastState = newState;\r\n\t\t\tthis.oldGameState = state;\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\tasync initializeoffsets(): Promise<void> {\r\n\t\tconsole.log('INITIALIZEOFFSETS???');\r\n\t\tthis.is_64bit = this.isX64Version();\r\n\t\tthis.shellcodeAddr = -1;\r\n\t\tthis.initializedWrite = false;\r\n\t\tthis.disableWriting = false;\r\n\r\n\t\tconst offsetLookups = await fetchOffsetLookup() as IOffsetsLookup;\r\n\t\tlet broadcastVersionAddr = undefined;\r\n\t\tif (this.is_64bit) {\r\n\t\t\tbroadcastVersionAddr = this.findPattern(\r\n\t\t\t\toffsetLookups.patterns.x64.broadcastVersion.sig,\r\n\t\t\t\toffsetLookups.patterns.x64.broadcastVersion.patternOffset,\r\n\t\t\t\toffsetLookups.patterns.x64.broadcastVersion.addressOffset,\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue\r\n\t\t\t); \r\n\t\t} else {\r\n\t\t\tbroadcastVersionAddr = this.findPattern(\r\n\t\t\t\toffsetLookups.patterns.x86.broadcastVersion.sig,\r\n\t\t\t\toffsetLookups.patterns.x86.broadcastVersion.patternOffset,\r\n\t\t\t\toffsetLookups.patterns.x86.broadcastVersion.addressOffset,\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue\r\n\t\t\t); \r\n\t\t}\r\n\r\n\t\tvar broadcastVersion = this.readMemory<number>(\r\n\t\t\t'int',\r\n\t\t\tthis.gameAssembly!.modBaseAddr,\r\n\t\t\tbroadcastVersionAddr\r\n\t\t);\r\n\t\tconsole.log(\"broadcastVersion: \", broadcastVersion)\r\n\r\n\t\tif (offsetLookups.versions[broadcastVersion]) {\r\n\t\t\tthis.offsets = await fetchOffsetsJson(this.is_64bit, offsetLookups.versions[broadcastVersion].file);\r\n\t\t} else {\r\n\t\t\tthis.offsets = await fetchOffsetsJson(this.is_64bit, offsetLookups.versions[\"default\"].file); // can't find file for this client, return default\r\n\t\t}\r\n\r\n\t\tthis.disableWriting = this.offsets.disableWriting;\r\n\t\tthis.oldMeetingHud = this.offsets.oldMeetingHud;\r\n\r\n\t\tconst innerNetClient = this.findPattern(\r\n\t\t\tthis.offsets.signatures.innerNetClient.sig,\r\n\t\t\tthis.offsets.signatures.innerNetClient.patternOffset,\r\n\t\t\tthis.offsets.signatures.innerNetClient.addressOffset\r\n\t\t);\r\n\r\n\t\tconst meetingHud = this.findPattern(\r\n\t\t\tthis.offsets.signatures.meetingHud.sig,\r\n\t\t\tthis.offsets.signatures.meetingHud.patternOffset,\r\n\t\t\tthis.offsets.signatures.meetingHud.addressOffset\r\n\t\t);\r\n\t\tconst gameData = this.findPattern(\r\n\t\t\tthis.offsets.signatures.gameData.sig,\r\n\t\t\tthis.offsets.signatures.gameData.patternOffset,\r\n\t\t\tthis.offsets.signatures.gameData.addressOffset\r\n\t\t);\r\n\t\tconst shipStatus = this.findPattern(\r\n\t\t\tthis.offsets.signatures.shipStatus.sig,\r\n\t\t\tthis.offsets.signatures.shipStatus.patternOffset,\r\n\t\t\tthis.offsets.signatures.shipStatus.addressOffset\r\n\t\t);\r\n\t\tconst miniGame = this.findPattern(\r\n\t\t\tthis.offsets.signatures.miniGame.sig,\r\n\t\t\tthis.offsets.signatures.miniGame.patternOffset,\r\n\t\t\tthis.offsets.signatures.miniGame.addressOffset\r\n\t\t);\r\n\r\n\t\tconst palette = this.findPattern(\r\n\t\t\tthis.offsets.signatures.palette.sig,\r\n\t\t\tthis.offsets.signatures.palette.patternOffset,\r\n\t\t\tthis.offsets.signatures.palette.addressOffset\r\n\t\t);\r\n\r\n\t\tconst playerControl = this.findPattern(\r\n\t\t\tthis.offsets.signatures.playerControl.sig,\r\n\t\t\tthis.offsets.signatures.playerControl.patternOffset,\r\n\t\t\tthis.offsets.signatures.playerControl.addressOffset\r\n\t\t);\r\n\t\tthis.offsets.playerControl_GameOptions[0] = playerControl;\r\n\t\tthis.offsets.palette[0] = palette;\r\n\t\tthis.offsets.meetingHud[0] = meetingHud;\r\n\t\tthis.offsets.allPlayersPtr[0] = gameData;\r\n\t\tthis.offsets.innerNetClient.base[0] = innerNetClient;\r\n\t\tthis.offsets.shipStatus[0] = shipStatus;\r\n\t\tthis.offsets.miniGame[0] = miniGame;\r\n\t\tif (!this.is_64bit) {\r\n\t\t\tthis.offsets.connectFunc = this.findPattern(\r\n\t\t\t\tthis.offsets.signatures.connectFunc.sig,\r\n\t\t\t\tthis.offsets.signatures.connectFunc.patternOffset,\r\n\t\t\t\tthis.offsets.signatures.connectFunc.addressOffset,\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t\tthis.offsets.fixedUpdateFunc = this.findPattern(\r\n\t\t\t\tthis.offsets.signatures.fixedUpdateFunc.sig,\r\n\t\t\t\tthis.offsets.signatures.fixedUpdateFunc.patternOffset,\r\n\t\t\t\tthis.offsets.signatures.fixedUpdateFunc.addressOffset,\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t\tthis.offsets.showModStampFunc = this.findPattern(\r\n\t\t\t\tthis.offsets.signatures.showModStamp.sig,\r\n\t\t\t\tthis.offsets.signatures.showModStamp.patternOffset,\r\n\t\t\t\tthis.offsets.signatures.showModStamp.addressOffset,\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t\tthis.offsets.modLateUpdateFunc = this.findPattern(\r\n\t\t\t\tthis.offsets.signatures.modLateUpdate.sig,\r\n\t\t\t\tthis.offsets.signatures.modLateUpdate.patternOffset,\r\n\t\t\t\tthis.offsets.signatures.modLateUpdate.addressOffset,\r\n\t\t\t\tfalse,\r\n\t\t\t\ttrue\r\n\t\t\t);\r\n\t\t}\r\n\t\tthis.offsets.serverManager_currentServer[0] = this.findPattern(\r\n\t\t\tthis.offsets.signatures.serverManager.sig,\r\n\t\t\tthis.offsets.signatures.serverManager.patternOffset,\r\n\t\t\tthis.offsets.signatures.serverManager.addressOffset\r\n\t\t);\r\n\t\t// if (this.loadedMod.id === 'POLUS_GG') {\r\n\t\t// \tthis.offsets.serverManager_currentServer[4] = 0x0c;\r\n\t\t// }\r\n\t\tthis.colorsInitialized = false;\r\n\t\tconsole.log('serverManager_currentServer', this.offsets.serverManager_currentServer[0].toString(16));\r\n\r\n\t\t// if (innerNetClient === 30104372 ||\r\n\t\t// \tinnerNetClient == 30001864 ||\r\n\t\t// \tinnerNetClient == 30155956 ||\r\n\t\t// \tinnerNetClient == 29580672 || \r\n\t\t// \tinnerNetClient == 30160488 ||\r\n\t\t// \tinnerNetClient == 0x2c6c278 ||\r\n\t\t// \tinnerNetClient == 0x1c57f54 ||\r\n\t\t// \tinnerNetClient == 0x1d17f2c ||\r\n\t\t// \tinnerNetClient == 0x1baa960 ||\r\n\t\t// \tinnerNetClient == 0x1D17F2C ||\r\n\t\t// \tinnerNetClient == 29777072 ||\r\n\t\t// \tinnerNetClient == 0x1C9CAC8 ||\r\n\t\t// \tinnerNetClient == 0x1d9dbb4 ||\r\n\t\t// \tinnerNetClient == 0x1e247c4 || // Moving this soon to a new repo\r\n\t\t// \tinnerNetClient == 30112580 || \r\n\t\t// \tinnerNetClient == 29537396 // 2022.2.24e\r\n\t\t// \t) {\r\n\t\t// \tthis.offsets = TempFixOffsets7(this.offsets);\r\n\t\t// }\r\n\t\t\r\n\t\t// if (innerNetClient === 0x2c6c278) {\r\n\t\t\t// temp fix for older game until I added more sigs.. //\r\n\t\t// \tthis.disableWriting = true;\r\n\t\t// \tthis.oldMeetingHud = true;\r\n\t\t// \tthis.offsets = TempFixOffsets(this.offsets);\r\n\t\t// }\r\n\r\n\t\t// if (innerNetClient === 0x1c57f54) {\r\n\t\t// \tthis.disableWriting = true;\r\n\t\t// \tthis.oldMeetingHud = true;\r\n\t\t// \t// temp fix for older game until I added more sigs.. // 12/9\r\n\t\t// \tthis.offsets = TempFixOffsets2(this.offsets);\r\n\t\t// }\r\n\r\n\t\t// if (innerNetClient === 0x1d9dbb4 || innerNetClient === 0x1e247c4) {\r\n\t\t// \t// temp fix for older game until I added more sigs.. // 25/5\r\n\t\t// \tthis.oldMeetingHud = true;\r\n\t\t// \tthis.offsets = TempFixOffsets3(this.offsets);\r\n\t\t// \tconst gameData = this.findPattern(\r\n\t\t// \t\tthis.offsets.signatures.gameData.sig,\r\n\t\t// \t\tthis.offsets.signatures.gameData.patternOffset,\r\n\t\t// \t\tthis.offsets.signatures.gameData.addressOffset\r\n\t\t// \t);\r\n\t\t// \tthis.offsets.allPlayersPtr[0] = gameData;\r\n\t\t// }\r\n\r\n\t\t// if (innerNetClient === 0x1d17f2c) {\r\n\t\t// \t//6/15\r\n\t\t// \tthis.offsets = TempFixOffsets4(this.offsets);\r\n\t\t// }\r\n\r\n\t\t// if (innerNetClient === 0x1baa960 || innerNetClient == 0x1D17F2C || innerNetClient == 29777072) {\r\n\t\t// \tthis.offsets = TempFixOffsets5(this.offsets);\r\n\t\t// \tthis.disableWriting = true;\r\n\t\t// }\r\n\r\n\t\t// if (innerNetClient === 0x1C9CAC8) {\r\n\t\t// \tthis.offsets = TempFixOffsets6(this.offsets);\r\n\t\t// }\r\n\r\n\t\t\r\n\t\tthis.PlayerStruct = new Struct();\r\n\t\tfor (const member of this.offsets.player.struct) {\r\n\t\t\tif (member.type === 'SKIP' && member.skip) {\r\n\t\t\t\tthis.PlayerStruct = this.PlayerStruct.addMember(Struct.TYPES.SKIP(member.skip), member.name);\r\n\t\t\t} else {\r\n\t\t\t\tthis.PlayerStruct = this.PlayerStruct.addMember<unknown>(\r\n\t\t\t\t\tStruct.TYPES[member.type] as ValueType<unknown>,\r\n\t\t\t\t\tmember.name\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(JSON.stringify(this.offsets,function(k,v){\r\n\t\t\tif(v instanceof Array && k != \"struct\")\r\n\t\t\t   return JSON.stringify(v);\r\n\t\t\treturn v;\r\n\t\t },2).replace(/\\\\/g, '')\r\n\t\t .replace(/\\\"\\[/g, '[')\r\n\t\t .replace(/\\]\\\"/g,']')\r\n\t\t .replace(/\\\"\\{/g, '{')\r\n\t\t .replace(/\\}\\\"/g,'}'));\r\n\t\tthis.initializeWrites();\r\n\t}\r\n\r\n\tinitializeWrites(): void {\r\n\t\tif (this.is_64bit || !this.offsets || !this.amongUs || !this.gameAssembly || this.disableWriting || this.is_linux) {\r\n\t\t\t//not supported atm\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// Shellcode to join games when u press join..\r\n\t\tconst shellCodeAddr = virtualAllocEx(this.amongUs.handle, null, 0x60, 0x00001000 | 0x00002000, 0x40);\r\n\t\tconst compareAddr = shellCodeAddr + 0x30;\r\n\r\n\t\tconst compareAddr1 = (compareAddr & 0xff000000) >> 24;\r\n\t\tconst compareAddr2 = (compareAddr & 0x00ff0000) >> 16;\r\n\t\tconst compareAddr3 = (compareAddr & 0x0000ff00) >> 8;\r\n\t\tconst compareAddr4 = compareAddr & 0x000000ff;\r\n\r\n\t\t//(DESTINATION_RVA - CURRENT_RVA (E9) - 5)\r\n\t\tconst connectFunc = this.gameAssembly.modBaseAddr + this.offsets.connectFunc;\r\n\t\tconst relativeConnectJMP = connectFunc - (shellCodeAddr + 0x18) - 0x4;\r\n\r\n\t\tconst fixedUpdateFunc = this.gameAssembly!.modBaseAddr + this.offsets.fixedUpdateFunc;\r\n\t\tconst relativefixedJMP = fixedUpdateFunc + 0x5 - (shellCodeAddr + 0x24) - 0x4;\r\n\r\n\t\tconst relativeShellJMP = shellCodeAddr - (fixedUpdateFunc + 0x1) - 0x4;\r\n\r\n\t\tconst shellcode = [\r\n\t\t\t0x80, // cmp byte ptr [ShellcodeAddr + 0x30], 0x0,\r\n\t\t\t0x3d,\r\n\t\t\tcompareAddr4, // 0x0\r\n\t\t\tcompareAddr3, // 0x0\r\n\t\t\tcompareAddr2, // 0xA3\r\n\t\t\tcompareAddr1, // 0x0\r\n\t\t\t0x00,\r\n\t\t\t0x74, // je 0x13\r\n\t\t\t0x13,\r\n\t\t\t0xc6, // mov byte ptr [ShellcodeAddr + 0x30], 0x00\r\n\t\t\t0x05,\r\n\t\t\tcompareAddr4, // 0x0\r\n\t\t\tcompareAddr3, // 0x0\r\n\t\t\tcompareAddr2, // 0xA3\r\n\t\t\tcompareAddr1, // 0x0\r\n\t\t\t0x00, // write 0x0\r\n\t\t\t0xc7, // mov [ebp - 0x4], 0x1\r\n\t\t\t0x45,\r\n\t\t\t0xfc,\r\n\t\t\t0x01,\r\n\t\t\t0x00,\r\n\t\t\t0x00,\r\n\t\t\t0x00,\r\n\t\t\t0xe9, // jmp innerNet.InnerNetClient.Connect\r\n\t\t\trelativeConnectJMP & 0x000000ff,\r\n\t\t\t(relativeConnectJMP & 0x0000ff00) >> 8,\r\n\t\t\t(relativeConnectJMP & 0x00ff0000) >> 16,\r\n\t\t\t(relativeConnectJMP & 0xff000000) >> 24,\r\n\t\t\t0x55, // original 5 bytes && (je 0x13 endpoint)\r\n\t\t\t0x8b,\r\n\t\t\t0xec,\r\n\t\t\t0x56,\r\n\t\t\t0x8b,\r\n\t\t\t0x75,\r\n\t\t\t0x08,\r\n\t\t\t0xe9, // jmp innerNet.InnerNetClient.FixedUpdate + 0x5\r\n\t\t\trelativefixedJMP & 0x000000ff,\r\n\t\t\t(relativefixedJMP & 0x0000ff00) >> 8,\r\n\t\t\t(relativefixedJMP & 0x00ff0000) >> 16,\r\n\t\t\t(relativefixedJMP & 0xff000000) >> 24,\r\n\t\t];\r\n\r\n\t\tconst shellcodeJMP = [\r\n\t\t\t// jmp ShellcodeRelativeAddress\r\n\t\t\t0xe9,\r\n\t\t\trelativeShellJMP & 0x000000ff,\r\n\t\t\t(relativeShellJMP & 0x0000ff00) >> 8,\r\n\t\t\t(relativeShellJMP & 0x00ff0000) >> 16,\r\n\t\t\t(relativeShellJMP & 0xff000000) >> 24,\r\n\t\t];\r\n\r\n\t\tconst modManagerLateUpdate = this.gameAssembly!.modBaseAddr + this.offsets.modLateUpdateFunc;\r\n\t\tconst shellCodeAddr_1 = shellCodeAddr + 0x300;\r\n\t\tconst relativeShellJMP_1 = shellCodeAddr_1 - (modManagerLateUpdate + 0x1) - 0x4;\r\n\t\tconst relativefixedJMP_1 = modManagerLateUpdate + 0x5 - (shellCodeAddr_1 + 0x1c) - 0x4;\r\n\t\tconst showModStampFunc = this.gameAssembly!.modBaseAddr + this.offsets.showModStampFunc;\r\n\t\tconst relativeShowModStamp = showModStampFunc + 0x6 - (shellCodeAddr_1 + 0x12) - 0x4;\r\n\r\n\t\tconst _compareAddr = shellCodeAddr + 0x44;\r\n\r\n\t\tconst _compareAddr1 = (_compareAddr & 0xff000000) >> 24;\r\n\t\tconst _compareAddr2 = (_compareAddr & 0x00ff0000) >> 16;\r\n\t\tconst _compareAddr3 = (_compareAddr & 0x0000ff00) >> 8;\r\n\t\tconst _compareAddr4 = _compareAddr & 0x000000ff;\r\n\r\n\t\tconst shellcode_modIcon = [\r\n\t\t\t0x80, // cmp byte ptr [ShellcodeAddr + 0x30], 0x0,\r\n\t\t\t0x3d,\r\n\t\t\t_compareAddr4, // 0x0\r\n\t\t\t_compareAddr3, // 0x0\r\n\t\t\t_compareAddr2, // 0xA3\r\n\t\t\t_compareAddr1, // 0x0\r\n\t\t\t0x00,\r\n\t\t\t0x74, // je 0x13\r\n\t\t\t0x0c,\r\n\t\t\t0xc6, // mov byte ptr [ShellcodeAddr + 0x30], 0x00\r\n\t\t\t0x05,\r\n\t\t\t_compareAddr4, // 0x0\r\n\t\t\t_compareAddr3, // 0x0\r\n\t\t\t_compareAddr2, // 0xA3\r\n\t\t\t_compareAddr1, // 0x0\r\n\t\t\t0x00, // write 0x0\r\n\t\t\t0xe9,\r\n\t\t\trelativeShowModStamp & 0x000000ff,\r\n\t\t\t(relativeShowModStamp & 0x0000ff00) >> 8,\r\n\t\t\t(relativeShowModStamp & 0x00ff0000) >> 16,\r\n\t\t\t(relativeShowModStamp & 0xff000000) >> 24,\r\n\t\t\t0x53,\r\n\t\t\t0x8b,\r\n\t\t\t0xdc,\r\n\t\t\t0x83,\r\n\t\t\t0xec,\r\n\t\t\t0x08,\r\n\t\t\t0xe9, // jmp innerNet.InnerNetClient.FixedUpdate + 0x5\r\n\t\t\trelativefixedJMP_1 & 0x000000ff,\r\n\t\t\t(relativefixedJMP_1 & 0x0000ff00) >> 8,\r\n\t\t\t(relativefixedJMP_1 & 0x00ff0000) >> 16,\r\n\t\t\t(relativefixedJMP_1 & 0xff000000) >> 24,\r\n\t\t];\r\n\r\n\t\tconst shellcodeJMP_1 = [\r\n\t\t\t// jmp ShellcodeRelativeAddress\r\n\t\t\t0xe9,\r\n\t\t\trelativeShellJMP_1 & 0x000000ff,\r\n\t\t\t(relativeShellJMP_1 & 0x0000ff00) >> 8,\r\n\t\t\t(relativeShellJMP_1 & 0x00ff0000) >> 16,\r\n\t\t\t(relativeShellJMP_1 & 0xff000000) >> 24,\r\n\t\t\t0x90,\r\n\t\t];\r\n\r\n\t\t//MMOnline\r\n\t\tthis.writeString(shellCodeAddr + 0x70, 'OnlineGame');\r\n\t\tthis.writeString(shellCodeAddr + 0x95, 'MMOnline');\r\n\r\n\t\tthis.writeString(shellCodeAddr + 0xd5, 'Ping: {0} ms');\r\n\r\n\t\twriteBuffer(this.amongUs!.handle, shellCodeAddr, Buffer.from(shellcode));\r\n\t\twriteBuffer(this.amongUs!.handle, fixedUpdateFunc, Buffer.from(shellcodeJMP));\r\n\r\n\t\twriteBuffer(this.amongUs!.handle, shellCodeAddr_1, Buffer.from(shellcode_modIcon));\r\n\t\twriteBuffer(this.amongUs!.handle, modManagerLateUpdate, Buffer.from(shellcodeJMP_1));\r\n\r\n\t\tthis.shellcodeAddr = shellCodeAddr;\r\n\t\tthis.writtenPingMessage = false;\r\n\t\tthis.initializedWrite = true;\r\n\t}\r\n\r\n\twriteString(address: number, text: string): void {\r\n\t\tconst innerNetClient = this.readMemory<number>(\r\n\t\t\t'ptr',\r\n\t\t\tthis.gameAssembly!.modBaseAddr,\r\n\t\t\tthis.offsets!.innerNetClient.base\r\n\t\t);\r\n\t\tconst stringBase = this.readMemory<number>('int', innerNetClient, [0x80, 0x0]); // mainMenuScene just a random string where we can base our string off\r\n\r\n\t\tconst connectionString = [\r\n\t\t\tstringBase & 0x000000ff,\r\n\t\t\t(stringBase & 0x0000ff00) >> 8,\r\n\t\t\t(stringBase & 0x00ff0000) >> 16,\r\n\t\t\t(stringBase & 0xff000000) >> 24,\r\n\t\t\t0x00,\r\n\t\t\t0x00,\r\n\t\t\t0x00,\r\n\t\t\t0x00,\r\n\t\t\ttext.length, // length\r\n\t\t\t0x00,\r\n\t\t\t0x00,\r\n\t\t\t0x00,\r\n\t\t];\r\n\t\tfor (let index = 0; index < text.length; index++) {\r\n\t\t\tconnectionString.push(text.charCodeAt(index));\r\n\t\t\tconnectionString.push(0x0);\r\n\t\t}\r\n\t\twriteBuffer(this.amongUs!.handle, address, Buffer.from(connectionString));\r\n\t}\r\n\tskipPingMessage = 25;\r\n\tfixPingMessage() {\r\n\t\tif (\r\n\t\t\t!this.offsets ||\r\n\t\t\t!this.gameAssembly ||\r\n\t\t\t!this.initializedWrite ||\r\n\t\t\tthis.writtenPingMessage ||\r\n\t\t\tthis.skipPingMessage-- > 0\r\n\t\t) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\twriteMemory(this.amongUs!.handle, this.shellcodeAddr + 0x44, 1, 'int32'); // enable ModIcon\r\n\r\n\t\tthis.skipPingMessage = 25;\r\n\t\tthis.writtenPingMessage = true;\r\n\t\tfor (let index = 0; index < 3; index++) {\r\n\t\t\tconst stringOffset = this.findPattern(\r\n\t\t\t\tthis.offsets.signatures.pingMessageString.sig,\r\n\t\t\t\tthis.offsets.signatures.pingMessageString.patternOffset,\r\n\t\t\t\tthis.offsets.signatures.pingMessageString.addressOffset,\r\n\t\t\t\tfalse,\r\n\t\t\t\tfalse,\r\n\t\t\t\tindex\r\n\t\t\t);\r\n\t\t\tconst stringPtr = this.readMemory<number>('int', this.gameAssembly.modBaseAddr, stringOffset);\r\n\t\t\tconst pingstring = this.readString(stringPtr);\r\n\t\t\tif (pingstring.includes('Ping') || pingstring.includes('<color=#BA68C8')) {\r\n\t\t\t\tlet addStr = '';\r\n\t\t\t\tif (this.localPlayerName && store.get('useRHSJokes')) {\r\n\t\t\t\t\taddStr = '\\n<size=60%>';\r\n\t\t\t\t\tconst beers = [\r\n\t\t\t\t\t\t'Wife Beater',\r\n\t\t\t\t\t\t'Carlsberg',\r\n\t\t\t\t\t\t'Corona',\r\n\t\t\t\t\t\t'Fosters',\r\n\t\t\t\t\t\t'Moretti',\r\n\t\t\t\t\t\t'Peroni',\r\n\t\t\t\t\t\t'Sprite',\r\n\t\t\t\t\t\t'Tea, Earl Grey, Hot.',\r\n\t\t\t\t\t\t'Coke Zero',\r\n\t\t\t\t\t\t'Piss Water',\r\n\t\t\t\t\t];\r\n\t\t\t\t\tswitch (this.localPlayerName) {\r\n\t\t\t\t\t\tcase 'Overlord':\r\n\t\t\t\t\t\t\taddStr += \"Tonight's drink is: <color=#FF0000>\" + beers[(beers.length * Math.random()) | 0] + '</color>';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'Spanposter':\r\n\t\t\t\t\t\t\taddStr += \"<color=#BA68C8>I haven't been an alien in</color> <color=#FFFF00>ages</color>\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'James':\r\n\t\t\t\t\t\t\taddStr += 'It was a <color=#FFFF00>graphical</color> <color=#FF0000>bug</color>';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'RHS':\r\n\t\t\t\t\t\t\taddStr += \"Remember to breathe. <color=#FF0000>Don't ragequit</color>\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'Knuxina':\r\n\t\t\t\t\t\t\taddStr += '<color=#FFFF00>*sigh*</color>';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'GerbilSoft':\r\n\t\t\t\t\t\t\taddStr += 'Quack.';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'ur mom':\r\n\t\t\t\t\t\t\taddStr += 'People who mess with the lights deserve everything they get';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'Chris':\r\n\t\t\t\t\t\t\taddStr += 'Bought a Wondermega yet?';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'Giovanni':\r\n\t\t\t\t\t\t\taddStr += \"It's still coming home\";\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'Hogeez':\r\n\t\t\t\t\t\t\taddStr +=\r\n\t\t\t\t\t\t\t\t'If you kill James, you lose your \\n <color=#FFE751>Sonic</color> <color=#C31F80>C</color><color=#6EFFFF>o</color><color=#FFFD7D>l</color><color=#A946DE>o</color><color=#57C759>r</color><color=#F3F605>s</color> 100% save file';\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\taddStr += '</size>';\r\n\t\t\t\t}\r\n\t\t\t\tthis.writeString(this.shellcodeAddr + 0xd5, 'Ping: {0}ms' + addStr);\r\n\t\t\t\twriteMemory(\r\n\t\t\t\t\tthis.amongUs!.handle,\r\n\t\t\t\t\tthis.gameAssembly!.modBaseAddr + stringOffset,\r\n\t\t\t\t\tthis.shellcodeAddr + 0xd5,\r\n\t\t\t\t\t'int32'\r\n\t\t\t\t);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tjoinGame(code: string, server: string): boolean {\r\n\t\treturn false;\r\n\t\t// if (\r\n\t\t// \t!this.amongUs ||\r\n\t\t// \t!this.initializedWrite ||\r\n\t\t// \tserver.length > 15 ||\r\n\t\t// \t!this.offsets ||\r\n\t\t// \tthis.is_64bit\r\n\t\t// \t// || this.loadedMod.id === 'POLUS_GG'\r\n\t\t// ) {\r\n\t\t// \treturn false;\r\n\t\t// }\r\n\t\t// const innerNetClient = this.readMemory<number>(\r\n\t\t// \t'ptr',\r\n\t\t// \tthis.gameAssembly!.modBaseAddr,\r\n\t\t// \tthis.offsets!.innerNetClient.base\r\n\t\t// );\r\n\t\t// this.writeString(this.shellcodeAddr + 0x40, server);\r\n\t\t// writeMemory(\r\n\t\t// \tthis.amongUs.handle,\r\n\t\t// \tinnerNetClient + this.offsets.innerNetClient.networkAddress,\r\n\t\t// \tthis.shellcodeAddr + 0x40,\r\n\t\t// \t'int32'\r\n\t\t// );\r\n\t\t// writeMemory(\r\n\t\t// \tthis.amongUs.handle,\r\n\t\t// \tinnerNetClient + this.offsets.innerNetClient.onlineScene,\r\n\t\t// \tthis.shellcodeAddr + 0x70,\r\n\t\t// \t'int32'\r\n\t\t// );\r\n\t\t// writeMemory(\r\n\t\t// \tthis.amongUs.handle,\r\n\t\t// \tinnerNetClient + this.offsets.innerNetClient.mainMenuScene,\r\n\t\t// \tthis.shellcodeAddr + 0x95,\r\n\t\t// \t'int32'\r\n\t\t// );\r\n\t\t// writeMemory(this.amongUs.handle, innerNetClient + this.offsets.innerNetClient.networkPort, 22023, 'int32');\r\n\t\t// writeMemory(this.amongUs.handle, innerNetClient + this.offsets.innerNetClient.gameMode, 1, 'int32');\r\n\t\t// writeMemory(\r\n\t\t// \tthis.amongUs.handle,\r\n\t\t// \tinnerNetClient + this.offsets.innerNetClient.gameId,\r\n\t\t// \tthis.gameCodeToInt(code),\r\n\t\t// \t'int32'\r\n\t\t// );\r\n\t\t// writeMemory(this.amongUs.handle, this.shellcodeAddr + 0x30, 1, 'int32'); // call connect function\r\n\t\t// return true;\r\n\t}\r\n\r\n\tloadColors(): void {\r\n\t\tif (this.colorsInitialized) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst palletePtr = this.readMemory<number>('ptr', this.gameAssembly!.modBaseAddr, this.offsets!.palette);\r\n\t\tconst PlayerColorsPtr = this.readMemory<number>('ptr', palletePtr, this.offsets!.palette_playercolor);\r\n\t\tconst ShadowColorsPtr = this.readMemory<number>('ptr', palletePtr, this.offsets!.palette_shadowColor);\r\n\r\n\t\tconst colorLength = this.readMemory<number>('int', ShadowColorsPtr, this.offsets!.playerCount);\r\n\t\tconsole.log('Initializecolors', colorLength);\r\n\r\n\t\tif (!colorLength || colorLength <= 0 || colorLength > 300) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.rainbowColor = -9999;\r\n\t\tconst playercolors = [];\r\n\t\tfor (let i = 0; i < colorLength; i++) {\r\n\t\t\tconst playerColor = this.readMemory<number>('uint32', PlayerColorsPtr, [this.offsets!.playerAddrPtr + i * 0x4]);\r\n\t\t\tconst shadowColor = this.readMemory<number>('uint32', ShadowColorsPtr, [this.offsets!.playerAddrPtr + i * 0x4]);\r\n\t\t\tif (i == 0 && playerColor != 4279308742) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (playerColor === 4278190080) {\r\n\t\t\t\tthis.rainbowColor = i;\r\n\t\t\t}\r\n\t\t\t//4278190080\r\n\t\t\tplayercolors[i] = [numberToColorHex(playerColor), numberToColorHex(shadowColor)];\r\n\t\t}\r\n\t\tthis.colorsInitialized = colorLength > 0;\r\n\t\tthis.playercolors = playercolors;\r\n\t\ttry {\r\n\t\t\tthis.sendIPC(IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, playercolors);\r\n\t\t\tGenerateAvatars(playercolors)\r\n\t\t\t\t.then(() => console.log('done generate'))\r\n\t\t\t\t.catch((e) => console.error(e));\r\n\t\t} catch (e) {\r\n\t\t\t/* Empty block */\r\n\t\t}\r\n\t}\r\n\r\n\tisX64Version(): boolean {\r\n\t\tif (!this.amongUs || !this.gameAssembly) return false;\r\n\r\n\t\tconst optionalHeader_offset = readMemoryRaw<number>(\r\n\t\t\tthis.amongUs.handle,\r\n\t\t\tthis.gameAssembly.modBaseAddr + 0x3c,\r\n\t\t\t'uint32'\r\n\t\t);\r\n\t\tconst optionalHeader_magic = readMemoryRaw<number>(\r\n\t\t\tthis.amongUs.handle,\r\n\t\t\tthis.gameAssembly.modBaseAddr + optionalHeader_offset + 0x18,\r\n\t\t\t'short'\r\n\t\t);\r\n\t\t//\tconsole.log(optionalHeader_magic, 'optionalHeader_magic');\r\n\t\treturn optionalHeader_magic === 0x20b;\r\n\t}\r\n\r\n\treadCurrentServer(): void {\r\n\t\tconst currentServer = this.readMemory<number>(\r\n\t\t\t'ptr',\r\n\t\t\tthis.gameAssembly!.modBaseAddr,\r\n\t\t\tthis.offsets!.serverManager_currentServer\r\n\t\t);\r\n\t\tthis.currentServer = this.readString(currentServer);\r\n\t}\r\n\r\n\treadMemory<T>(dataType: DataType, address: number, offsets?: number[] | number, defaultParam?: T): T {\r\n\t\tif (!this.amongUs) return defaultParam as T;\r\n\t\tif (address === 0) return defaultParam as T;\r\n\t\tdataType = dataType == 'pointer' || dataType == 'ptr' ? (this.is_64bit ? 'uint64' : 'uint32') : dataType;\r\n\t\tif (typeof offsets === 'number') {\r\n\t\t\toffsets = [offsets];\r\n\t\t}\r\n\t\tconst { address: addr, last } = this.offsetAddress(address, offsets || []);\r\n\t\tif (addr === 0) return defaultParam as T;\r\n\t\treturn readMemoryRaw<T>(this.amongUs.handle, addr + last, dataType);\r\n\t}\r\n\r\n\toffsetAddress(address: number, offsets: number[]): { address: number; last: number } {\r\n\t\tif (!this.amongUs) throw 'Among Us not open? Weird error';\r\n\t\taddress = this.is_64bit ? address : address;\r\n\t\tfor (let i = 0; i < offsets.length - 1; i++) {\r\n\t\t\taddress = readMemoryRaw<number>(this.amongUs.handle, address + offsets[i], this.is_64bit ? 'uint64' : 'uint32');\r\n\r\n\t\t\tif (address == 0) break;\r\n\t\t}\r\n\t\tconst last = offsets.length > 0 ? offsets[offsets.length - 1] : 0;\r\n\t\treturn { address, last };\r\n\t}\r\n\r\n\treadString(address: number, maxLength = 50): string {\r\n\t\ttry {\r\n\t\t\tif (address === 0 || !this.amongUs) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tconst length = Math.max(\r\n\t\t\t\t0,\r\n\t\t\t\tMath.min(readMemoryRaw<number>(this.amongUs.handle, address + (this.is_64bit ? 0x10 : 0x8), 'int'), maxLength)\r\n\t\t\t);\r\n\t\t\t//\t\t\t\t//readMemoryRaw<number>(this.amongUs.handle, address + (this.is_64bit ? 0x10 : 0x8), 'int')\r\n\t\t\tconst buffer = readBuffer(this.amongUs.handle, address + (this.is_64bit ? 0x14 : 0xc), length << 1);\r\n\t\t\tif (buffer) {\r\n\t\t\t\treturn buffer.toString('utf16le').replace(/\\0/g, '');\r\n\t\t\t} else {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\r\n\treadDictionary(\r\n\t\taddress: number,\r\n\t\tmaxLen: number,\r\n\t\tcallback: (keyPtr: number, valPtr: number, index: number) => void\r\n\t): void {\r\n\t\tconst entries = this.readMemory<number>('ptr', address + (this.is_64bit ? 0x18 : 0xc));\r\n\t\tlet len = this.readMemory<number>('uint32', address + (this.is_64bit ? 0x20 : 0x10));\r\n\r\n\t\tlen = len > maxLen ? maxLen : len;\r\n\r\n\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\tconst offset = entries + ((this.is_64bit ? 0x20 : 0x10) + i * (this.is_64bit ? 0x18 : 0x10));\r\n\t\t\tcallback(offset, offset + (this.is_64bit ? 0x10 : 0xc), i);\r\n\t\t}\r\n\t}\r\n\r\n\tfindPattern(\r\n\t\tsignature: string,\r\n\t\tpatternOffset = 0x1,\r\n\t\taddressOffset = 0x0,\r\n\t\trelative = false,\r\n\t\tgetLocation = false,\r\n\t\tskip = 0\r\n\t): number {\r\n\t\tif (!this.amongUs || !this.gameAssembly) return 0x0;\r\n\t\tconst signatureTypes = 0x0 | 0x2;\r\n\t\tconst instruction_location = findPatternRaw(\r\n\t\t\tthis.amongUs.handle,\r\n\t\t\t'GameAssembly.dll',\r\n\t\t\tsignature,\r\n\t\t\tsignatureTypes,\r\n\t\t\tpatternOffset,\r\n\t\t\t0x0,\r\n\t\t\tskip\r\n\t\t);\r\n\t\tif (getLocation) {\r\n\t\t\treturn instruction_location + addressOffset;\r\n\t\t}\r\n\t\tconst offsetAddr = this.readMemory<number>('int', this.gameAssembly.modBaseAddr, [instruction_location]);\r\n\r\n\t\treturn this.is_64bit || relative\r\n\t\t\t? offsetAddr + instruction_location + addressOffset\r\n\t\t\t: offsetAddr - this.gameAssembly.modBaseAddr;\r\n\t}\r\n\r\n\tIntToGameCode(input: number): string {\r\n\t\tif (!input || input === 0) return '';\r\n\t\telse if (input <= -1000) return this.IntToGameCodeV2Impl(input);\r\n\t\telse if (input > 0) return this.IntToGameCodeV1Impl(input); // && this.loadedMod.id == 'POLUS_GG')\r\n\t\telse return '';\r\n\t}\r\n\r\n\tIntToGameCodeV1Impl(input: number): string {\r\n\t\tconst buf = Buffer.alloc(4);\r\n\t\tbuf.writeInt32LE(input, 0);\r\n\t\treturn buf.toString();\r\n\t}\r\n\r\n\tIntToGameCodeV2Impl(input: number): string {\r\n\t\tconst V2 = 'QWXRTYLPESDFGHUJKZOCVBINMA';\r\n\t\tconst a = input & 0x3ff;\r\n\t\tconst b = (input >> 10) & 0xfffff;\r\n\t\treturn [\r\n\t\t\tV2[Math.floor(a % 26)],\r\n\t\t\tV2[Math.floor(a / 26)],\r\n\t\t\tV2[Math.floor(b % 26)],\r\n\t\t\tV2[Math.floor((b / 26) % 26)],\r\n\t\t\tV2[Math.floor((b / 676) % 26)],\r\n\t\t\tV2[Math.floor((b / 17576) % 26)],\r\n\t\t].join('');\r\n\t}\r\n\r\n\tgameCodeToInt(code: string): number {\r\n\t\treturn code.length === 4 //&& this.loadedMod.id === 'POLUS_GG'\r\n\t\t\t? this.gameCodeToIntV1Impl(code)\r\n\t\t\t: this.gameCodeToIntV2Impl(code);\r\n\t}\r\n\r\n\tgameCodeToIntV1Impl(code: string): number {\r\n\t\tconst buf = Buffer.alloc(4);\r\n\t\tbuf.write(code);\r\n\t\treturn buf.readInt32LE(0);\r\n\t}\r\n\r\n\tgameCodeToIntV2Impl(code: string): number {\r\n\t\tconst V2Map = [25, 21, 19, 10, 8, 11, 12, 13, 22, 15, 16, 6, 24, 23, 18, 7, 0, 3, 9, 4, 14, 20, 1, 2, 5, 17];\r\n\t\tconst a = V2Map[code.charCodeAt(0) - 65];\r\n\t\tconst b = V2Map[code.charCodeAt(1) - 65];\r\n\t\tconst c = V2Map[code.charCodeAt(2) - 65];\r\n\t\tconst d = V2Map[code.charCodeAt(3) - 65];\r\n\t\tconst e = V2Map[code.charCodeAt(4) - 65];\r\n\t\tconst f = V2Map[code.charCodeAt(5) - 65];\r\n\t\tconst one = (a + 26 * b) & 0x3ff;\r\n\t\tconst two = c + 26 * (d + 26 * (e + 26 * f));\r\n\t\treturn one | ((two << 10) & 0x3ffffc00) | 0x80000000;\r\n\t}\r\n\r\n\thashCode(s: string): number {\r\n\t\tlet h = 0;\r\n\t\tfor (let i = 0; i < s.length; i++) h = (Math.imul(31, h) + s.charCodeAt(i)) | 0;\r\n\t\treturn h;\r\n\t}\r\n\r\n\tparsePlayer(ptr: number, buffer: Buffer, LocalclientId = -1): Player | undefined {\r\n\t\tif (!this.PlayerStruct || !this.offsets) return undefined;\r\n\r\n\t\tconst { data } = this.PlayerStruct.report<PlayerReport>(buffer, 0, {});\r\n\r\n\t\tif (this.is_64bit) {\r\n\t\t\tdata.objectPtr = this.readMemory('pointer', ptr, [this.PlayerStruct.getOffsetByName('objectPtr')]);\r\n\t\t\tdata.outfitsPtr = this.readMemory('pointer', ptr, [this.PlayerStruct.getOffsetByName('outfitsPtr')]);\r\n\t\t\tdata.taskPtr = this.readMemory('pointer', ptr, [this.PlayerStruct.getOffsetByName('taskPtr')]);\r\n\t\t\tdata.rolePtr = this.readMemory('pointer', ptr, [this.PlayerStruct.getOffsetByName('rolePtr')]);\r\n\r\n\t\t\t// data.name = this.readMemory('pointer', ptr, [this.PlayerStruct.getOffsetByName('name')]);\r\n\t\t}\r\n\t\tconst clientId = this.readMemory<number>('uint32', data.objectPtr, this.offsets.player.clientId);\r\n\t\tconst isLocal = clientId === LocalclientId && data.disconnected === 0;\r\n\r\n\t\tconst positionOffsets = isLocal\r\n\t\t\t? [this.offsets.player.localX, this.offsets.player.localY]\r\n\t\t\t: [this.offsets.player.remoteX, this.offsets.player.remoteY];\r\n\r\n\t\tlet x = this.readMemory<number>('float', data.objectPtr, positionOffsets[0]);\r\n\t\tlet y = this.readMemory<number>('float', data.objectPtr, positionOffsets[1]);\r\n\t\tlet currentOutfit = this.readMemory<number>('uint32', data.objectPtr, this.offsets.player.currentOutfit);\r\n\t\tconst isDummy = this.readMemory<boolean>('boolean', data.objectPtr, this.offsets.player.isDummy);\r\n\t\tlet name = 'error';\r\n\t\tlet shiftedColor = -1;\r\n\t\tif (data.hasOwnProperty('name')) {\r\n\t\t\tname = this.readString(data.name).split(/<.*?>/).join('');\r\n\t\t} else {\r\n\t\t\tthis.readDictionary(data.outfitsPtr, 6, (k, v, i) => {\r\n\t\t\t\tconst key = this.readMemory<number>('int32', k);\r\n\t\t\t\tconst val = this.readMemory<number>('ptr', v);\r\n\t\t\t\tif (key === 0 && i == 0) {\r\n\t\t\t\t\tconst namePtr = this.readMemory<number>('pointer', val, this.offsets!.player.outfit.playerName); // 0x40\r\n\t\t\t\t\tdata.color = this.readMemory<number>('uint32', val, this.offsets!.player.outfit.colorId); // 0x14\r\n\t\t\t\t\tname = this.readString(namePtr).split(/<.*?>/).join('');\r\n\t\t\t\t\tdata.hat = this.readString(this.readMemory<number>('ptr', val, this.offsets!.player.outfit.hatId));\r\n\t\t\t\t\tdata.skin = this.readString(this.readMemory<number>('ptr', val, this.offsets!.player.outfit.skinId));\r\n\t\t\t\t\tdata.visor = this.readString(this.readMemory<number>('ptr', val, this.offsets!.player.outfit.visorId));\r\n\t\t\t\t\tif (currentOutfit == 0 || currentOutfit > 10)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t} else if (key === currentOutfit) {\r\n\t\t\t\t\tshiftedColor = this.readMemory<number>('uint32', val, this.offsets!.player.outfit.colorId); // 0x14\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconst roleTeam = this.readMemory<number>('uint32', data.rolePtr, this.offsets!.player.roleTeam)\r\n\t\t\tdata.impostor = roleTeam;\r\n\r\n\t\t\tif (this.offsets!.player.nameText && shiftedColor == -1 && (this.loadedMod.id == \"THE_OTHER_ROLES\" || this.loadedMod.id == \"THE_OTHER_ROLES_GM\")) {\r\n\t\t\t\tlet nameText = this.readMemory<number>('ptr', data.objectPtr, this.offsets!.player.nameText);\r\n\t\t\t\tvar nameText_name = this.readString(nameText);\r\n\t\t\t\tif (nameText_name != name) {\r\n\t\t\t\t\tshiftedColor = data.color;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tname = name.split(/<.*?>/).join('');\r\n\t\tlet bugged = false;\r\n\t\tif (x === undefined || y === undefined || data.disconnected != 0 || data.color < 0 || data.color > this.playercolors.length) {\r\n\t\t\tx = 9999;\r\n\t\t\ty = 9999;\r\n\t\t\tbugged = true;\r\n\t\t}\r\n\r\n\t\tconst x_round = parseFloat(x?.toFixed(4));\r\n\t\tconst y_round = parseFloat(y?.toFixed(4));\r\n\r\n\t\tconst nameHash = this.hashCode(name);\r\n\t\tconst colorId = data.color === this.rainbowColor ? RainbowColorId : data.color;\r\n\t\treturn {\r\n\t\t\tptr,\r\n\t\t\tid: data.id,\r\n\t\t\tclientId: clientId,\r\n\t\t\tname,\r\n\t\t\tnameHash,\r\n\t\t\tcolorId,\r\n\t\t\thatId: data.hat ?? '',\r\n\t\t\tpetId: data.pet ?? '',\r\n\t\t\tskinId: data.skin ?? '',\r\n\t\t\tvisorId: data.visor ?? '',\r\n\t\t\tdisconnected: data.disconnected != 0,\r\n\t\t\tisImpostor: data.impostor == 1,\r\n\t\t\tisDead: data.dead == 1,\r\n\t\t\ttaskPtr: data.taskPtr,\r\n\t\t\tobjectPtr: data.objectPtr,\r\n\t\t\tshiftedColor,\r\n\t\t\tbugged,\r\n\t\t\tinVent: this.readMemory<number>('byte', data.objectPtr, this.offsets.player.inVent) > 0,\r\n\t\t\tisLocal,\r\n\t\t\tisDummy,\r\n\t\t\tx: x_round || x || 999,\r\n\t\t\ty: y_round || y || 999,\r\n\t\t};\r\n\t}\r\n}\r\n"]}