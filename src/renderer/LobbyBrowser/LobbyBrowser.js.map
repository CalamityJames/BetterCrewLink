{"version":3,"file":"LobbyBrowser.js","sourceRoot":"","sources":["LobbyBrowser.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport { ipcRenderer } from 'electron';\r\nimport { IpcHandlerMessages } from '../../common/ipc-messages';\r\nimport io from 'socket.io-client';\r\nimport Store from 'electron-store';\r\nimport { ISettings } from '../../common/ISettings';\r\nimport i18next from 'i18next';\r\nimport { Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle } from '@material-ui/core';\r\nimport languages from '../language/languages';\r\nimport { PublicLobbyMap, PublicLobby } from '../../common/PublicLobby';\r\nimport { modList } from '../../common/Mods';\r\nimport { GameState } from '../../common/AmongUsState';\r\n\r\nconst store = new Store<ISettings>();\r\nconst serverUrl = store.get('serverURL', 'https://bettercrewl.ink/');\r\nconst language = store.get('language', 'en');\r\ni18next.changeLanguage(language);\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n\thead: {\r\n\t\tbackgroundColor: '#1d1a23',\r\n\t\tcolor: theme.palette.common.white,\r\n\t},\r\n\tbody: {\r\n\t\tfontSize: 14,\r\n\t},\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles(() => ({\r\n\troot: {\r\n\t\t'&:nth-of-type(odd)': {\r\n\t\t\tbackgroundColor: '#25232a',\r\n\t\t},\r\n\t\t'&:nth-of-type(even)': {\r\n\t\t\tbackgroundColor: '#1d1a23',\r\n\t\t},\r\n\t},\r\n}))(TableRow);\r\n\r\nconst useStyles = makeStyles({\r\n\ttable: {\r\n\t\tminWidth: 700,\r\n\t},\r\n\tcontainer: {\r\n\t\tmaxHeight: '400px',\r\n\t},\r\n});\r\n\r\nconst servers: {\r\n\t[server: string]: string;\r\n} = {\r\n\t'50.116.1.42': 'North America',\r\n\t'172.105.251.170': 'Europe',\r\n\t'139.162.111.196': 'Asia',\r\n\t'192.241.154.115': 'skeld.net',\r\n\t'185.7.80.9': 'TOU Master',\r\n\t'78.47.142.18': 'TOR Server',\r\n};\r\n\r\nfunction sortLobbies(a: PublicLobby, b: PublicLobby) {\r\n\tif (a.gameState === GameState.LOBBY && b.gameState !== GameState.LOBBY) {\r\n\t\treturn -1;\r\n\t} else if (b.gameState === GameState.LOBBY && a.gameState !== GameState.LOBBY) {\r\n\t\treturn 1;\r\n\t} else {\r\n\t\tif (b.current_players === b.max_players && a.current_players !== a.max_players) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tif (a.current_players < b.current_players) {\r\n\t\t\treturn 1;\r\n\t\t} else if (a.current_players > b.current_players) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n}\r\n\r\n// @ts-ignore\r\nexport default function lobbyBrowser({ t }) {\r\n\tconst classes = useStyles();\r\n\tconst [publiclobbies, setPublicLobbies] = useState<PublicLobbyMap>({});\r\n\tconst [socket, setSocket] = useState<SocketIOClient.Socket>();\r\n\tconst [code, setCode] = React.useState('');\r\n\tconst [, forceRender] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst s = io(serverUrl, {\r\n\t\t\ttransports: ['websocket'],\r\n\t\t});\r\n\t\tsetSocket(s);\r\n\r\n\t\ts.on('update_lobby', (lobby: PublicLobby) => {\r\n\t\t\tsetPublicLobbies((old) => ({ ...old, [lobby.id]: lobby }));\r\n\t\t});\r\n\r\n\t\ts.on('new_lobbies', (lobbies: PublicLobby[]) => {\r\n\t\t\tsetPublicLobbies((old) => {\r\n\t\t\t\tconst lobbyMap: PublicLobbyMap = { ...old };\r\n\t\t\t\tfor (const index in lobbies) {\r\n\t\t\t\t\tlobbyMap[lobbies[index].id] = lobbies[index];\r\n\t\t\t\t}\r\n\t\t\t\treturn lobbyMap;\r\n\t\t\t});\r\n\t\t});\r\n\t\ts.on('remove_lobby', (lobbyId: number) => {\r\n\t\t\tsetPublicLobbies((old) => {\r\n\t\t\t\tdelete old[lobbyId];\r\n\t\t\t\treturn { ...old };\r\n\t\t\t});\r\n\t\t});\r\n\t\ts.on('connect', () => {\r\n\t\t\ts.emit('lobbybrowser', true);\r\n\t\t});\r\n\r\n\t\tipcRenderer.on(IpcHandlerMessages.JOIN_LOBBY_ERROR, (event, code, server) => {\r\n\t\t\tconsole.log('ERROR: ', code);\r\n\t\t\tsetCode(`${code}  ${servers[server] ? `on region ${servers[server]}` : `\\n Custom Server: ${server}`}`);\r\n\t\t});\r\n\t\tconst secondPassed = setInterval(() => {\r\n\t\t\tforceRender({});\r\n\t\t}, 1000);\r\n\t\treturn () => {\r\n\t\t\tsocket?.emit('lobbybrowser', false);\r\n\t\t\tsocket?.close();\r\n\t\t\tclearInterval(secondPassed);\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div style={{ height: '100%', width: '100%', paddingTop: '15px' }}>\r\n\t\t\t<div style={{ height: '500px', padding: '20px' }}>\r\n\t\t\t\t<b>{t('lobbybrowser.header')}</b>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={code !== ''}\r\n\t\t\t\t\t// TransitionComponent={Transition}\r\n\t\t\t\t\tkeepMounted\r\n\t\t\t\t\taria-labelledby=\"alert-dialog-slide-title\"\r\n\t\t\t\t\taria-describedby=\"alert-dialog-slide-description\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-slide-title\">Lobby information</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-slide-description\">\r\n\t\t\t\t\t\t\t{code.split('\\n').map((i, key) => {\r\n\t\t\t\t\t\t\t\treturn <div key={key}>{i}</div>;\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={() => setCode('')} color=\"primary\">\r\n\t\t\t\t\t\t\t{t('buttons.close')}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t\t<Paper>\r\n\t\t\t\t\t<TableContainer component={Paper} className={classes.container}>\r\n\t\t\t\t\t\t<Table className={classes.table} aria-label=\"customized table\" stickyHeader>\r\n\t\t\t\t\t\t\t<TableHead>\r\n\t\t\t\t\t\t\t\t<TableRow>\r\n\t\t\t\t\t\t\t\t\t<StyledTableCell>{t('lobbybrowser.list.title')}</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">{t('lobbybrowser.list.host')}</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">{t('lobbybrowser.list.players')}</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">{t('lobbybrowser.list.mods')}</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">{t('lobbybrowser.list.language')}</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">Status</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t{/* {t('lobbybrowser.list.staut')} */}\r\n\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\"></StyledTableCell>\r\n\t\t\t\t\t\t\t\t</TableRow>\r\n\t\t\t\t\t\t\t</TableHead>\r\n\t\t\t\t\t\t\t<TableBody>\r\n\t\t\t\t\t\t\t\t{Object.values(publiclobbies)\r\n\t\t\t\t\t\t\t\t\t.sort(sortLobbies)\r\n\t\t\t\t\t\t\t\t\t.map((row: PublicLobby) => (\r\n\t\t\t\t\t\t\t\t\t\t<StyledTableRow key={row.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell component=\"th\" scope=\"row\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.title}\r\n\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">{row.host}</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.current_players}/{row.max_players}\r\n\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{modList.find((o) => o.id === row.mods)?.label ?? 'None'}\r\n\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{(languages as any)[row.language]?.name ?? 'English'}\r\n\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"left\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.gameState === GameState.LOBBY ? 'Lobby' : 'In game'}{' '}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{row.stateTime && new Date(Date.now() - row.stateTime).toISOString().substr(14, 5)}\r\n\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t\t\t<StyledTableCell align=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdisabled={row.gameState !== GameState.LOBBY || row.max_players === row.current_players}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsocket?.emit(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'join_lobby',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(state: number, codeOrError: string, server: string, publicLobby: PublicLobby) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (state === 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCode(`${t('lobbybrowser.code')}: ${codeOrError} \\n Region: ${server}`);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ipcRenderer.send(IpcHandlerMessages.JOIN_LOBBY, codeOrError, server);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetCode(`Error: ${codeOrError}`);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tShow code\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{/* <Button variant=\"contained\" color=\"secondary\" style={{ marginLeft: '5px' }}>\r\n\t\t\t\t\t\t\t\t\t\t\t\treport\r\n\t\t\t\t\t\t\t\t\t\t\t</Button> */}\r\n\t\t\t\t\t\t\t\t\t\t\t</StyledTableCell>\r\n\t\t\t\t\t\t\t\t\t\t</StyledTableRow>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</TableBody>\r\n\t\t\t\t\t\t</Table>\r\n\t\t\t\t\t</TableContainer>\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n"]}