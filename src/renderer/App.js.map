{"version":3,"file":"App.js","sourceRoot":"","sources":["App.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Dispatch, SetStateAction, useEffect, useReducer, useState, useRef } from 'react';\r\nimport Voice from './Voice';\r\nimport Menu from './Menu';\r\nimport { ipcRenderer } from 'electron';\r\nimport { AmongUsState } from '../common/AmongUsState';\r\nimport Settings, { settingsReducer, lobbySettingsReducer, pushToTalkOptions } from './settings/Settings';\r\nimport { GameStateContext, SettingsContext, LobbySettingsContext, PlayerColorContext } from './contexts';\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport {\r\n\tAutoUpdaterState,\r\n\tIpcHandlerMessages,\r\n\tIpcMessages,\r\n\tIpcRendererMessages,\r\n\tIpcSyncMessages,\r\n} from '../common/ipc-messages';\r\nimport theme from './theme';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport RefreshSharpIcon from '@material-ui/icons/RefreshSharp';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport makeStyles from '@material-ui/core/styles/makeStyles';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport prettyBytes from 'pretty-bytes';\r\nimport { IpcOverlayMessages } from '../common/ipc-messages';\r\nimport ReactDOM from 'react-dom';\r\nimport './css/index.css';\r\nimport 'source-code-pro/source-code-pro.css';\r\nimport 'typeface-varela/index.css';\r\nimport { DEFAULT_PLAYERCOLORS } from '../main/avatarGenerator';\r\nimport './language/i18n';\r\nimport { withNamespaces } from 'react-i18next';\r\nimport { GamePlatform } from '../common/GamePlatform';\r\nlet appVersion = '';\r\nif (typeof window !== 'undefined' && window.location) {\r\n\tconst query = new URLSearchParams(window.location.search.substring(1));\r\n\tappVersion = ' v' + query.get('version') || '';\r\n}\r\n\r\nconst useStyles = makeStyles(() => ({\r\n\troot: {\r\n\t\tposition: 'absolute',\r\n\t\twidth: '100vw',\r\n\t\theight: theme.spacing(3),\r\n\t\tbackgroundColor: '#1d1a23',\r\n\t\ttop: 0,\r\n\t\tWebkitAppRegion: 'drag',\r\n\t\tzIndex: 100,\r\n\t},\r\n\ttitle: {\r\n\t\twidth: '100%',\r\n\t\ttextAlign: 'center',\r\n\t\tdisplay: 'block',\r\n\t\theight: theme.spacing(3),\r\n\t\tlineHeight: `${theme.spacing(3)}px`,\r\n\t\tcolor: theme.palette.primary.main,\r\n\t},\r\n\tbutton: {\r\n\t\tWebkitAppRegion: 'no-drag',\r\n\t\tmarginLeft: 'auto',\r\n\t\tpadding: 0,\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t},\r\n}));\r\n\r\ninterface TitleBarProps {\r\n\tsettingsOpen: boolean;\r\n\tsetSettingsOpen: Dispatch<SetStateAction<boolean>>;\r\n}\r\n\r\nconst RawTitleBar: React.FC<TitleBarProps> = function ({ settingsOpen, setSettingsOpen }: TitleBarProps) {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<span className={classes.title} style={{ marginLeft: 10 }}>\r\n\t\t\t\tCJ CrewLink {appVersion}\r\n\t\t\t</span>\r\n\t\t\t<IconButton\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tstyle={{ left: 0 }}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tonClick={() => setSettingsOpen(!settingsOpen)}\r\n\t\t\t>\r\n\t\t\t\t<SettingsIcon htmlColor=\"#777\" />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tstyle={{ left: 22 }}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tonClick={() => ipcRenderer.send('reload')}\r\n\t\t\t>\r\n\t\t\t\t<RefreshSharpIcon htmlColor=\"#777\" />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton\r\n\t\t\t\tclassName={classes.button}\r\n\t\t\t\tstyle={{ right: 0 }}\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tonClick={() => ipcRenderer.send(IpcMessages.QUIT_CREWLINK)}\r\n\t\t\t>\r\n\t\t\t\t<CloseIcon htmlColor=\"#777\" />\r\n\t\t\t</IconButton>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nconst TitleBar = React.memo(RawTitleBar);\r\n\r\nenum AppState {\r\n\tMENU,\r\n\tVOICE,\r\n}\r\n// @ts-ignore\r\nexport default function App({ t }): JSX.Element {\r\n\tconst [state, setState] = useState<AppState>(AppState.MENU);\r\n\tconst [gameState, setGameState] = useState<AmongUsState>({} as AmongUsState);\r\n\tconst [settingsOpen, setSettingsOpen] = useState(false);\r\n\tconst [diaOpen, setDiaOpen] = useState(true);\r\n\tconst [error, setError] = useState('');\r\n\tconst [updaterState, setUpdaterState] = useState<AutoUpdaterState>({\r\n\t\tstate: 'unavailable',\r\n\t});\r\n\tconst playerColors = useRef<string[][]>(DEFAULT_PLAYERCOLORS);\r\n\tconst overlayInitCount = useRef<number>(0);\r\n\r\n\tconst settings = useReducer(settingsReducer, {\r\n\t\tlanguage: 'default',\r\n\t\talwaysOnTop: true,\r\n\t\tmicrophone: 'Default',\r\n\t\tspeaker: 'Default',\r\n\t\tpushToTalkMode: pushToTalkOptions.VOICE,\r\n\t\tserverURL: 'https://bettercrewl.ink/',\r\n\t\tpushToTalkShortcut: 'V',\r\n\t\tdeafenShortcut: 'RControl',\r\n\t\tmuteShortcut: 'RAlt',\r\n\t\timpostorRadioShortcut: 'F',\r\n\t\thideCode: false,\r\n\t\tnatFix: false,\r\n\t\tmobileHost: true,\r\n\t\toverlayPosition: 'right',\r\n\t\tcompactOverlay: false,\r\n\t\tenableOverlay: false,\r\n\t\tmeetingOverlay: false,\r\n\t\tghostVolume: 100,\r\n\t\tmasterVolume: 100,\r\n\t\tmicrophoneGain: 100,\r\n\t\tmicSensitivity: 0.15,\r\n\t\tmicrophoneGainEnabled: false,\r\n\t\tmicSensitivityEnabled: false,\r\n\t\tvadEnabled: true,\r\n\t\thardware_acceleration: true,\r\n\t\techoCancellation: true,\r\n\t\tenableSpatialAudio: true,\r\n\t\tobsSecret: undefined,\r\n\t\tobsOverlay: false,\r\n\t\tnoiseSuppression: true,\r\n\t\tplayerConfigMap: {},\r\n\t\tlocalLobbySettings: {\r\n\t\t\tmaxDistance: 5.32,\r\n\t\t\thaunting: false,\r\n\t\t\thearImpostorsInVents: false,\r\n\t\t\timpostersHearImpostersInvent: false,\r\n\t\t\timpostorRadioEnabled: false,\r\n\t\t\tcommsSabotage: false,\r\n\t\t\tdeadOnly: false,\r\n\t\t\tmeetingGhostOnly: false,\r\n\t\t\thearThroughCameras: false,\r\n\t\t\twallsBlockAudio: false,\r\n\t\t\tvisionHearing: false,\r\n\t\t\tpublicLobby_on: false,\r\n\t\t\tpublicLobby_title: '',\r\n\t\t\tpublicLobby_language: 'en',\r\n\t\t},\r\n\t\tlaunchPlatform: GamePlatform.STEAM,\r\n\t\tcustomPlatforms: {},\r\n\t\tuseRHSJokes: true\r\n\t});\r\n\tconst lobbySettings = useReducer(lobbySettingsReducer, settings[0].localLobbySettings);\r\n\r\n\tuseEffect(() => {\r\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, playerColors.current);\r\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_SETTINGS_CHANGED, settings[0]);\r\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_GAME_STATE_CHANGED, gameState);\r\n\t}, [overlayInitCount.current]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst onOpen = (_: Electron.IpcRendererEvent, isOpen: boolean) => {\r\n\t\t\tsetState(isOpen ? AppState.VOICE : AppState.MENU);\r\n\t\t};\r\n\t\tconst onState = (_: Electron.IpcRendererEvent, newState: AmongUsState) => {\r\n\t\t\tsetGameState(newState);\r\n\t\t};\r\n\r\n\t\tconst onError = (_: Electron.IpcRendererEvent, error: string) => {\r\n\t\t\tshouldInit = false;\r\n\t\t\tsetError(error);\r\n\t\t};\r\n\t\tconst onAutoUpdaterStateChange = (_: Electron.IpcRendererEvent, state: AutoUpdaterState) => {\r\n\t\t\tsetUpdaterState((old) => ({ ...old, ...state }));\r\n\t\t};\r\n\t\tconst onColorsChange = (_: Electron.IpcRendererEvent, colors: string[][]) => {\r\n\t\t\tconsole.log('RECIEVED COLORS');\r\n\t\t\tplayerColors.current = colors;\r\n\t\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, colors);\r\n\t\t};\r\n\r\n\t\tconst onOverlayInit = () => {\r\n\t\t\toverlayInitCount.current++;\r\n\t\t};\r\n\r\n\t\tlet shouldInit = true;\r\n\t\tipcRenderer\r\n\t\t\t.invoke(IpcHandlerMessages.START_HOOK)\r\n\t\t\t.then(() => {\r\n\t\t\t\tif (shouldInit) {\r\n\t\t\t\t\tsetGameState(ipcRenderer.sendSync(IpcSyncMessages.GET_INITIAL_STATE));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error: Error) => {\r\n\t\t\t\tif (shouldInit) {\r\n\t\t\t\t\tshouldInit = false;\r\n\t\t\t\t\tsetError(error.message);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\tipcRenderer.on(IpcRendererMessages.AUTO_UPDATER_STATE, onAutoUpdaterStateChange);\r\n\t\tipcRenderer.on(IpcRendererMessages.NOTIFY_GAME_OPENED, onOpen);\r\n\t\tipcRenderer.on(IpcRendererMessages.NOTIFY_GAME_STATE_CHANGED, onState);\r\n\t\tipcRenderer.on(IpcRendererMessages.ERROR, onError);\r\n\t\tipcRenderer.on(IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, onColorsChange);\r\n\t\tipcRenderer.on(IpcOverlayMessages.REQUEST_INITVALUES, onOverlayInit);\r\n\r\n\t\treturn () => {\r\n\t\t\tipcRenderer.off(IpcRendererMessages.AUTO_UPDATER_STATE, onAutoUpdaterStateChange);\r\n\t\t\tipcRenderer.off(IpcRendererMessages.NOTIFY_GAME_OPENED, onOpen);\r\n\t\t\tipcRenderer.off(IpcRendererMessages.NOTIFY_GAME_STATE_CHANGED, onState);\r\n\t\t\tipcRenderer.off(IpcRendererMessages.ERROR, onError);\r\n\t\t\tipcRenderer.off(IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, onColorsChange);\r\n\t\t\tshouldInit = false;\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_GAME_STATE_CHANGED, gameState);\r\n\t}, [gameState]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(playerColors.current);\r\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_PLAYERCOLORS_CHANGED, playerColors.current);\r\n\t\tipcRenderer.send(IpcMessages.SEND_TO_OVERLAY, IpcOverlayMessages.NOTIFY_SETTINGS_CHANGED, settings[0]);\r\n\t}, [settings[0]]);\r\n\r\n\tlet page;\r\n\tswitch (state) {\r\n\t\tcase AppState.MENU:\r\n\t\t\tpage = <Menu t={t} error={error} />;\r\n\t\t\tbreak;\r\n\t\tcase AppState.VOICE:\r\n\t\t\tpage = <Voice t={t} error={error} />;\r\n\t\t\tbreak;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<PlayerColorContext.Provider value={playerColors.current}>\r\n\t\t\t<GameStateContext.Provider value={gameState}>\r\n\t\t\t\t<LobbySettingsContext.Provider value={lobbySettings}>\r\n\t\t\t\t\t<SettingsContext.Provider value={settings}>\r\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\r\n\t\t\t\t\t\t\t<TitleBar settingsOpen={settingsOpen} setSettingsOpen={setSettingsOpen} />\r\n\t\t\t\t\t\t\t<Settings t={t} open={settingsOpen} onClose={() => setSettingsOpen(false)} />\r\n\t\t\t\t\t\t\t<Dialog fullWidth open={updaterState.state !== 'unavailable' && diaOpen}>\r\n\t\t\t\t\t\t\t\t{updaterState.state === 'downloaded' && updaterState.info && (\r\n\t\t\t\t\t\t\t\t\t<DialogTitle>Update v{updaterState.info.version}</DialogTitle>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{updaterState.state === 'downloading' && <DialogTitle>Updating...</DialogTitle>}\r\n\t\t\t\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'downloading' && updaterState.progress && (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<LinearProgress variant={'determinate'} value={updaterState.progress.percent} />\r\n\t\t\t\t\t\t\t\t\t\t\t<DialogContentText>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{prettyBytes(updaterState.progress.transferred)} / {prettyBytes(updaterState.progress.total)}\r\n\t\t\t\t\t\t\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'downloaded' && (\r\n\t\t\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t\t\t<LinearProgress variant={'indeterminate'} />\r\n\t\t\t\t\t\t\t\t\t\t\t<DialogContentText>Restart now or later?</DialogContentText>\r\n\t\t\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t{updaterState.state === 'error' && (\r\n\t\t\t\t\t\t\t\t\t\t<DialogContentText color=\"error\">{updaterState.error}</DialogContentText>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t\t\t{updaterState.state === 'error' && (\r\n\t\t\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t\t\t<Button href=\"https://github.com/OhMyGuus/BetterCrewLink/releases/latest\">Download Manually</Button>\r\n\t\t\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t{updaterState.state === 'downloaded' && (\r\n\t\t\t\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tipcRenderer.send('update-app');\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tNow\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetDiaOpen(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\tLater\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t</Dialog>\r\n\t\t\t\t\t\t\t{page}\r\n\t\t\t\t\t\t</ThemeProvider>\r\n\t\t\t\t\t</SettingsContext.Provider>\r\n\t\t\t\t</LobbySettingsContext.Provider>\r\n\t\t\t</GameStateContext.Provider>\r\n\t\t</PlayerColorContext.Provider>\r\n\t);\r\n}\r\n// @ts-ignore\r\nconst App2 = withNamespaces()(App);\r\n// @ts-ignore\r\nReactDOM.render(<App2 />, document.getElementById('app'));\r\n"]}